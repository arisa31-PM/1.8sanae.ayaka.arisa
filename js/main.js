// $(function () {
//   const $section = $("#experience");
//   const $clickBtn = $section.find(".click-btn");
//   const $clickBtnSp = $section.find(".click-btn-sp");
//   const $lightEffect = $section.find(".light-effect");
//   const $hoverPc = $section.find(".hover-text.hover-pc");
//   const $hoverSp = $section.find(".hover-text.hover-sp");

//   const isMobile = window.innerWidth <= 768;

//   // PCÊôÇ„ÅÆ„Åø„Éû„Ç¶„ÇπËøΩÂæì„Ç®„Éï„Çß„ÇØ„Éà
//   if (!isMobile) {
//     $section.on("mousemove", function (e) {
//       const offset = $section.offset();
//       const x = e.pageX - offset.left;
//       const y = e.pageY - offset.top;

//       $clickBtn.css({
//         transform: `translate(${x}px, ${y}px) translate(-50%, -50%)`,
//       });

//       $lightEffect.css({
//         left: x + "px",
//         top: y + "px",
//       });
//     });

//     $section.on("mouseleave", function () {
//       $clickBtn.css({ opacity: 0 });
//       $lightEffect.css({ opacity: 0 });
//     });

//     $section.on("mouseenter", function () {
//       $clickBtn.css({ opacity: 1 });
//       $lightEffect.css({ opacity: 1 });
//     });

//     $clickBtn.show();
//     $clickBtnSp.hide();
//     $hoverPc.show();
//     $hoverSp.hide();
//   } else {
//     $clickBtn.hide();
//     $clickBtnSp.show();
//     $lightEffect.hide();
//     $hoverPc.hide();
//     $hoverSp.show();
//   }

//   // „Çπ„É†„Éº„Çπ„Çπ„ÇØ„É≠„Éº„É´
//   $('a[href^="#"]').on("click", function (e) {
//     const speed = 200;
//     const href = $(this).attr("href");
//     const $target = href === "#" || href === "" ? $("html") : $(href);

//     let position;
//     if (href === "#experience") {
//       position =
//         $target.offset().top + $target.outerHeight() - $(window).height() + 20;
//     } else if (href === "#voice") {
//       position = $target.offset().top - 200;
//     } else {
//       position = $target.offset().top;
//     }

//     $("html, body").animate({ scrollTop: position }, speed, "swing");
//     e.preventDefault();
//   });

//   // VOICE „Çª„ÇØ„Ç∑„Éß„É≥ „Éï„Çß„Éº„Éâ„Ç§„É≥
//   function fadeInVoice() {
//     $(".voice").each(function () {
//       const elemTop = $(this).offset().top;
//       const elemBottom = elemTop + $(this).outerHeight();
//       const scrollTop = $(window).scrollTop();
//       const windowHeight = $(window).height();

//       const isVisible =
//         scrollTop + windowHeight > elemTop + 100 &&
//         scrollTop < elemBottom - 100;

//       const $slider = $(this).hasClass("slider-left") || $(this).hasClass("slider-right")
//         ? $(this)
//         : $(this).find(".slider-left, .slider-right");

//       if (isVisible) {
//         $slider.addClass("active");
//       } else {
//         $slider.removeClass("active");
//       }
//     });
//   }

//   $(window).on("scroll load", fadeInVoice);


//   $(window).on("scroll load", fadeInVoice);

//   // „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„ÉºÈñãÈñâÔºã„Çπ„ÇØ„É≠„Éº„É´Âà∂Âæ°
//   $("#hamburger").on("click", function () {
//     $(this).toggleClass("active");
//     $("#neonMenu").toggleClass("active");
//     $("body").toggleClass("menu-open");

//     // „Ç¢„Ç§„Ç≥„É≥„ÅÆËëâ„Å£„Å±„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
//     $("#leafIcon").toggleClass("open");
//   });

//   // „É°„Éã„É•„Éº„ÅÆÂ§ñÂÅ¥„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
//   $("#neonMenu").on("click", function (e) {
//     if (!$(e.target).closest(".menu-inner").length) {
//       $(this).removeClass("active");
//       $("#hamburger").removeClass("active");
//       $("body").removeClass("menu-open");
//       $("#leafIcon").removeClass("open");
//     }
//   });

//   // „É°„Éã„É•„ÉºÂÜÖ„É™„É≥„ÇØ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
//   $(".menu-inner a").on("click", function () {
//     $("#neonMenu").removeClass("active");
//     $("#hamburger").removeClass("active");
//     $("body").removeClass("menu-open");
//     $("#leafIcon").removeClass("open");
//   });

//   // Ê®™„Çπ„ÇØ„É≠„Éº„É´

//   $(function () {
//     // „Åì„Åì„Å´ jQuery Âá¶ÁêÜ„Åü„Å°

//     // ‚Üì‚Üì‚Üì Vanilla JS „ÅÆÂá¶ÁêÜ„Åü„Å°„ÇÇ„Åì„Åì„Å´ÂÖ•„Çå„ÇãÔºÅ ‚Üì‚Üì‚Üì
//     const container = document.querySelector('.scroll-container');
//     const nextSection = document.querySelector('.fall');
//     const header = document.getElementById("header");
//     const footer = document.querySelector("footer");

//     // ‚úÖ „Éõ„Ç§„Éº„É´„ÅßÊ®™„Çπ„ÇØ„É≠„Éº„É´
//     if (container) {
//       console.log("üì¶ container: ", container);
//       container.style.border = "5px dashed red";

//       document.body.addEventListener('wheel', () => {
//         console.log("üåÄ body„Åß„Éõ„Ç§„Éº„É´Áô∫ÁÅ´üî•");
//       });

//       container.addEventListener('wheel', (e) => {
//         console.log("üåÄ container„Åß„Éõ„Ç§„Éº„É´Áô∫ÁÅ´üî•");
//         e.preventDefault();
//         container.scrollLeft += e.deltaY;
//       }, { passive: false });

//       // ‚úÖ ‰∏ÄÁï™Âè≥„Åæ„Åß„Çπ„ÇØ„É≠„Éº„É´„Åó„Åü„Çâ„ÄÅÊ¨°„ÅÆ„Çª„ÇØ„Ç∑„Éß„É≥„Å∏
//       if (nextSection) {
//         container.addEventListener('scroll', () => {
//           const scrollEnd = container.scrollLeft + container.clientWidth >= container.scrollWidth - 10;
//           if (scrollEnd) {
//             nextSection.scrollIntoView({ behavior: 'smooth' });
//           }
//         });
//       }
//     } else {
//       alert("‚ö†Ô∏è .scroll-container „ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„ÇìÔºÅ");
//     }

//     // ‚úÖ „Éï„ÉÉ„Çø„Éº„ÅåË¶ã„Åà„Åü„Çâ„Éò„ÉÉ„ÉÄ„ÉºÈùûË°®Á§∫
//     if (header && footer) {
//       const observer = new IntersectionObserver(
//         (entries) => {
//           entries.forEach((entry) => {
//             if (entry.isIntersecting) {
//               header.classList.add("unfixed");
//             } else {
//               header.classList.remove("unfixed");
//             }
//           });
//         },
//         { root: null, threshold: 0 }
//       );
//       observer.observe(footer);
//     } else {
//       console.log("„Éò„ÉÉ„ÉÄ„Éº„Åæ„Åü„ÅØ„Éï„ÉÉ„Çø„Éº„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ");
//     }
//   });

$(function () {
  const $section = $("#experience");
  const $clickBtn = $section.find(".click-btn");
  const $clickBtnSp = $section.find(".click-btn-sp");
  const $lightEffect = $section.find(".light-effect");
  const $hoverPc = $section.find(".hover-text.hover-pc");
  const $hoverSp = $section.find(".hover-text.hover-sp");

  const isMobile = window.innerWidth <= 768;

  if (!isMobile) {
    $section.on("mousemove", function (e) {
      const offset = $section.offset();
      const x = e.pageX - offset.left;
      const y = e.pageY - offset.top;

      $clickBtn.css({ transform: `translate(${x}px, ${y}px) translate(-50%, -50%)` });
      $lightEffect.css({ left: x + "px", top: y + "px" });
    });

    $section.on("mouseleave", function () {
      $clickBtn.css({ opacity: 0 });
      $lightEffect.css({ opacity: 0 });
    });

    $section.on("mouseenter", function () {
      $clickBtn.css({ opacity: 1 });
      $lightEffect.css({ opacity: 1 });
    });

    $clickBtn.show();
    $clickBtnSp.hide();
    $hoverPc.show();
    $hoverSp.hide();
  } else {
    $clickBtn.hide();
    $clickBtnSp.show();
    $lightEffect.hide();
    $hoverPc.hide();
    $hoverSp.show();
  }

  $('a[href^="#"]').on("click", function (e) {
    const speed = 200;
    const href = $(this).attr("href");
    const $target = href === "#" || href === "" ? $("html") : $(href);
    let position;

    if (href === "#experience") {
      position = $target.offset().top + $target.outerHeight() - $(window).height() + 20;
    } else if (href === "#voice") {
      position = $target.offset().top - 200;
    } else {
      position = $target.offset().top;
    }

    $("html, body").animate({ scrollTop: position }, speed, "swing");
    e.preventDefault();
  });

  function fadeInVoice() {
    $(".voice").each(function () {
      const elemTop = $(this).offset().top;
      const elemBottom = elemTop + $(this).outerHeight();
      const scrollTop = $(window).scrollTop();
      const windowHeight = $(window).height();
      const isVisible = scrollTop + windowHeight > elemTop + 100 && scrollTop < elemBottom - 100;

      const $slider = $(this).hasClass("slider-left") || $(this).hasClass("slider-right")
        ? $(this)
        : $(this).find(".slider-left, .slider-right");

      if (isVisible) {
        $slider.addClass("active");
      } else {
        $slider.removeClass("active");
      }
    });
  }

  $(window).on("scroll load", fadeInVoice);

  $("#hamburger").on("click", function () {
    $(this).toggleClass("active");
    $("#neonMenu").toggleClass("active");
    $("body").toggleClass("menu-open");
    $("#leafIcon").toggleClass("open");
  });

  $("#neonMenu").on("click", function (e) {
    if (!$(e.target).closest(".menu-inner").length) {
      $(this).removeClass("active");
      $("#hamburger").removeClass("active");
      $("body").removeClass("menu-open");
      $("#leafIcon").removeClass("open");
    }
  });

  $(".menu-inner a").on("click", function () {
    $("#neonMenu").removeClass("active");
    $("#hamburger").removeClass("active");
    $("body").removeClass("menu-open");
    $("#leafIcon").removeClass("open");
  });

  // üåÄ Ê®™„Çπ„ÇØ„É≠„Éº„É´Èñ¢ÈÄ£„ÅÆÂá¶ÁêÜ„Åü„Å°
  const container = document.querySelector('.scroll-container');
  const nextSection = document.querySelector('.fall');
  const header = document.getElementById("header");
  const footer = document.querySelector("footer");

  if (container) {
    console.log("üì¶ container: ", container);
    // container.style.border = "5px dashed red";

    document.body.addEventListener('wheel', () => {
      console.log("üåÄ body„Åß„Éõ„Ç§„Éº„É´Áô∫ÁÅ´üî•");
    });

    container.addEventListener('wheel', (e) => {
      console.log("üåÄ container„Åß„Éõ„Ç§„Éº„É´Áô∫ÁÅ´üî•");
      e.preventDefault();
      container.scrollLeft += e.deltaY;
    }, { passive: false });

    if (nextSection) {
      container.addEventListener('scroll', () => {
        const scrollEnd = container.scrollLeft + container.clientWidth >= container.scrollWidth - 10;
        if (scrollEnd) {
          nextSection.scrollIntoView({ behavior: 'smooth' });
        }
      });
    }
  } else {
    // alert("‚ö†Ô∏è .scroll-container „ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„ÇìÔºÅ");
  }

  if (header && footer) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            header.classList.add("unfixed");
          } else {
            header.classList.remove("unfixed");
          }
        });
      },
      { root: null, threshold: 0 }
    );
    observer.observe(footer);
  } else {
    console.log("„Éò„ÉÉ„ÉÄ„Éº„Åæ„Åü„ÅØ„Éï„ÉÉ„Çø„Éº„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ");
  }
});
